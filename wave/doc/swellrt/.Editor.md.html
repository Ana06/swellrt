<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Strict//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>/home/pablo/Development/projects/swellrt/wave/doc/swellrt/.Editor.md.html</title>


<style type="text/css">
body {
	color: #333;
	font: 13px/1.4 "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;
	padding: 0;
	margin: 0;
}

a {
	background: transparent;
	color: #4183c4;
	text-decoration: none;
}

a:active,
a:hover {
	outline: 0 none;
	text-decoration: underline;
}

abbr[title] {
	border-bottom: 1px dotted;
}

b,
strong {
	font-weight: bold;
}

dfn {
	font-style: italic;
}
h1 {
	font-size: 2em;
	margin: 0.67em 0;
}
mark {
	background: #ff0;
	color: #000;
}
small {
	font-size: 80%;
}
sub, sup {
	font-size: 75%;
	line-height: 0;
	position: relative;
	vertical-align: baseline;
}
sup {
	top: -0.5em;
}
sub {
	bottom: -0.25em;
}
img {
	border: 0 none;
}
svg:not(:root) {
	overflow: hidden;
}
figure {
	margin: 1em 40px;
}
hr {
	box-sizing: content-box;
	height: 0;
}

code,
kbd,
pre,
samp {
	font-family: monospace,monospace;
	font-size: 1em;
}

pre {
	overflow: auto;
	font: 12px Consolas,"Liberation Mono",Menlo,Courier,monospace;
	margin-bottom: 0;
	margin-top: 0;
}

.markdown-body {
	padding: 30px;
	font-size: 16px;
	line-height: 1.6;
	word-wrap: break-word;
}

.markdown-body>*:first-child {
	margin-top: 0 !important;
}

.markdown-body>*:last-child {
	margin-bottom: 0 !important;
}

.markdown-body .absent {
	color: #c00;
}

.markdown-body .anchor {
	position: absolute;
	top: 0;
	bottom: 0;
	left: 0;
	display: block;
	padding-right: 6px;
	padding-left: 30px;
	margin-left: -30px;
}

.markdown-body .anchor:focus {
	outline: none;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
	position: relative;
	margin-top: 1em;
	margin-bottom: 16px;
	font-weight: bold;
	line-height: 1.4;
}

.markdown-body h1 .octicon-link,
.markdown-body h2 .octicon-link,
.markdown-body h3 .octicon-link,
.markdown-body h4 .octicon-link,
.markdown-body h5 .octicon-link,
.markdown-body h6 .octicon-link {
	display: none;
	color: #000;
	vertical-align: middle;
}

.markdown-body h1:hover .anchor,
.markdown-body h2:hover .anchor,
.markdown-body h3:hover .anchor,
.markdown-body h4:hover .anchor,
.markdown-body h5:hover .anchor,
.markdown-body h6:hover .anchor {
	padding-left: 8px;
	margin-left: -30px;
	line-height: 1;
	text-decoration: none;
}

.markdown-body h1:hover .anchor .octicon-link,
.markdown-body h2:hover .anchor .octicon-link,
.markdown-body h3:hover .anchor .octicon-link,
.markdown-body h4:hover .anchor .octicon-link,
.markdown-body h5:hover .anchor .octicon-link,
.markdown-body h6:hover .anchor .octicon-link {
	display: inline-block;
}

.markdown-body h1 tt,
.markdown-body h1 code,
.markdown-body h2 tt,
.markdown-body h2 code,
.markdown-body h3 tt,
.markdown-body h3 code,
.markdown-body h4 tt,
.markdown-body h4 code,
.markdown-body h5 tt,
.markdown-body h5 code,
.markdown-body h6 tt,
.markdown-body h6 code {
	font-size: inherit;
}

.markdown-body h1 {
	padding-bottom: 0.3em;
	font-size: 2.25em;
	line-height: 1.2;
	border-bottom: 1px solid #eee;
}

.markdown-body h2 {
	padding-bottom: 0.3em;
	font-size: 1.75em;
	line-height: 1.225;
	border-bottom: 1px solid #eee;
}

.markdown-body h3 {
	font-size: 1.5em;
	line-height: 1.43;
}

.markdown-body h4 {
	font-size: 1.25em;
}

.markdown-body h5 {
	font-size: 1em;
}

.markdown-body h6 {
	font-size: 1em;
	color: #777;
}

.markdown-body p,.markdown-body blockquote,
.markdown-body ul,.markdown-body ol,
.markdown-body dl,.markdown-body table,
.markdown-body pre {
	margin-top: 0;
	margin-bottom: 16px;
}

.markdown-body hr {
	height: 4px;
	padding: 0;
	margin: 16px 0;
	background-color: #e7e7e7;
	border: 0 none;
}

.markdown-body ul,
.markdown-body ol {
	padding-left: 2em;
}

.markdown-body ul.no-list,
.markdown-body ol.no-list {
	padding: 0;
	list-style-type: none;
}

.markdown-body ul ul,
.markdown-body ul ol,
.markdown-body ol ol,
.markdown-body ol ul {
	margin-top: 0;
	margin-bottom: 0;
}

.markdown-body li>p {
	margin-top: 16px;
}

.markdown-body dl {
	padding: 0;
}

.markdown-body dl dt {
	padding: 0;
	margin-top: 16px;
	font-size: 1em;
	font-style: italic;
	font-weight: bold;
}

.markdown-body dl dd {
	padding: 0 16px;
	margin-bottom: 16px;
}

.markdown-body blockquote {
	padding: 0 15px;
	color: #777;
	border-left: 4px solid #ddd;
}

.markdown-body blockquote>:first-child {
	margin-top: 0;
}

.markdown-body blockquote>:last-child {
	margin-bottom: 0;
}

.markdown-body table {
	display: block;
	width: 100%;
	overflow: auto;
	word-break: normal;
	word-break: keep-all;
}

.markdown-body table th {
	font-weight: bold;
}

.markdown-body table th,
.markdown-body table td {
	padding: 6px 13px;
	border: 1px solid #ddd;
}

.markdown-body table tr {
	background-color: #fff;
	border-top: 1px solid #ccc;
}

.markdown-body table tr:nth-child(2n) {
	background-color: #f8f8f8;
}

.markdown-body img {
	max-width: 100%;
	-moz-box-sizing: border-box;
	box-sizing: border-box;
}

.markdown-body span.frame {
	display: block;
	overflow: hidden;
}

.markdown-body span.frame>span {
	display: block;
	float: left;
	width: auto;
	padding: 7px;
	margin: 13px 0 0;
	overflow: hidden;
	border: 1px solid #ddd;
}

.markdown-body span.frame span img {
	display: block;
	float: left;
}

.markdown-body span.frame span span {
	display: block;
	padding: 5px 0 0;
	clear: both;
	color: #333;
}

.markdown-body span.align-center {
	display: block;
	overflow: hidden;
	clear: both;
}

.markdown-body span.align-center>span {
	display: block;
	margin: 13px auto 0;
	overflow: hidden;
	text-align: center;
}

.markdown-body span.align-center span img {
	margin: 0 auto;
	text-align: center;
}

.markdown-body span.align-right {
	display: block;
	overflow: hidden;
	clear: both;
}

.markdown-body span.align-right>span {
	display: block;
	margin: 13px 0 0;
	overflow: hidden;
	text-align: right;
}

.markdown-body span.align-right span img {
	margin: 0;
	text-align: right;
}

.markdown-body span.float-left {
	display: block;
	float: left;
	margin-right: 13px;
	overflow: hidden;
}

.markdown-body span.float-left span {
	margin: 13px 0 0;
}

.markdown-body span.float-right {
	display: block;
	float: right;
	margin-left: 13px;
	overflow: hidden;
}

.markdown-body span.float-right>span {
	display: block;
	margin: 13px auto 0;
	overflow: hidden;
	text-align: right;
}

.markdown-body code,.markdown-body tt {
	padding: 0;
	padding-top: 0.2em;
	padding-bottom: 0.2em;
	margin: 0;
	font-size: 85%;
	background-color: rgba(0,0,0,0.04);
	border-radius: 3px;
}

.markdown-body code:before,
.markdown-body code:after,
.markdown-body tt:before,
.markdown-body tt:after {
	letter-spacing: -0.2em;
	content: "\00a0";
}

.markdown-body code br,
.markdown-body tt br {
	display: none;
}

.markdown-body del code {
	text-decoration: inherit;
}

.markdown-body pre>code {
	padding: 0;
	margin: 0;
	font-size: 100%;
	word-break: normal;
	white-space: pre;
	background: transparent;
	border: 0;
}

.markdown-body .highlight {
	margin-bottom: 16px;
}

.markdown-body .highlight pre,
.markdown-body pre {
	padding: 16px;
	overflow: auto;
	font-size: 85%;
	line-height: 1.45;
	background-color: #f7f7f7;
	border-radius: 3px;
}

.markdown-body .highlight pre {
	margin-bottom: 0;
	word-break: normal;
}

.markdown-body pre {
	word-wrap: normal;
}

.markdown-body pre code,
.markdown-body pre tt {
	display: inline;
	max-width: initial;
	padding: 0;
	margin: 0;
	overflow: initial;
	line-height: inherit;
	word-wrap: normal;
	background-color: transparent;
	border: 0;
}

.markdown-body pre code:before,
.markdown-body pre code:after,
.markdown-body pre tt:before,
.markdown-body pre tt:after {
	content: normal;
}

.highlight .pl-coc,
.highlight .pl-entl,
.highlight .pl-entm,
.highlight .pl-eoa,
.highlight .pl-mai .pl-sf,
.highlight .pl-mm,
.highlight .pl-pdv,
.highlight .pl-sc,
.highlight .pl-som,
.highlight .pl-sr,
.highlight .pl-v,
.highlight .pl-vpf {
	color: #0086b3;
}
.highlight .pl-eoac,
.highlight .pl-mdht,
.highlight .pl-mi1,
.highlight .pl-mri,
.highlight .pl-va,
.highlight .pl-vpu {
	color: #008080;
}
.highlight .pl-c,
.highlight .pl-pdc {
	color: #b4b7b4;
	font-style: italic;
}
.highlight .pl-k,
.highlight .pl-ko,
.highlight .pl-kolp,
.highlight .pl-mc,
.highlight .pl-mr,
.highlight .pl-ms,
.highlight .pl-s,
.highlight .pl-sok,
.highlight .pl-st {
	color: #6e5494;
}
.highlight .pl-ef,
.highlight .pl-enf,
.highlight .pl-enm,
.highlight .pl-entc,
.highlight .pl-eoi,
.highlight .pl-sf,
.highlight .pl-smc {
	color: #d12089;
}
.highlight .pl-ens,
.highlight .pl-eoai,
.highlight .pl-kos,
.highlight .pl-mh .pl-pdh,
.highlight .pl-mp,
.highlight .pl-pde,
.highlight .pl-stp {
	color: #458;
}
.highlight .pl-enti {
	color: #d12089;
	font-weight: bold;
}
.highlight .pl-cce,
.highlight .pl-enc,
.highlight .pl-kou,
.highlight .pl-mq {
	color: #f93;
}
.highlight .pl-mp1 .pl-sf {
	color: #458;
	font-weight: bold;
}
.highlight .pl-cos,
.highlight .pl-ent,
.highlight .pl-md,
.highlight .pl-mdhf,
.highlight .pl-ml,
.highlight .pl-pdc1,
.highlight .pl-pds,
.highlight .pl-s1,
.highlight .pl-scp,
.highlight .pl-sol {
	color: #df5000;
}
.highlight .pl-c1,
.highlight .pl-cn,
.highlight .pl-pse,
.highlight .pl-pse .pl-s2,
.highlight .pl-vi {
	color: #a31515;
}
.highlight .pl-mb,
.highlight .pl-pdb {
	color: #df5000;
	font-weight: bold;
}
.highlight .pl-mi,
.highlight .pl-pdi {
	color: #6e5494;
	font-style: italic;
}
.highlight .pl-ms1 {
	background-color: #f5f5f5;
}
.highlight .pl-mdh,
.highlight .pl-mdi {
	font-weight: bold;
}
.highlight .pl-mdr {
	color: #0086b3;
	font-weight: bold;
}
.highlight .pl-s2 {
	color: #333;
}
.highlight .pl-ii {
	background-color: #df5000;
	color: #fff;
}
.highlight .pl-ib {
	background-color: #f93;
}
.highlight .pl-id {
	background-color: #a31515;
	color: #fff;
}
.highlight .pl-iu {
	background-color: #b4b7b4;
}
.highlight .pl-mo {
	color: #969896;
}

</style>


<script type="text/javascript">

function getDocumentScrollTop() 
{
   var res = document.body.scrollTop || document.documentElement.scrollTop || window.pageYOffset || 0;
   // alert(res);
   return res;
}

function setDocumentScrollTop(ypos) 
{
	window.scrollTo(0, ypos);
}

</script>


</head>
<body class="markdown-body">
<p>Swell Web API includes a customizable rich-text editor.</p> 
<h2> <a id="editor-component" class="anchor" href="#editor-component" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Editor component</h2> 
<p>The swell's text editor component allows to embed a full-featured text editor in a Web page that already uses the swell API.</p> 
<p>An editor is attached to a particular DIV of a page:</p> 
<div class="highlight highlight-text-html-basic">
 <pre>&lt;<span class="pl-ent">div</span> <span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">&quot;</span>editor<span class="pl-pds">&quot;</span></span>&gt;
	<span class="pl-c"><span class="pl-c">&lt;!--</span> swell's text fields cab be displayed here <span class="pl-c">--&gt;</span></span>
&lt;/<span class="pl-ent">div</span>&gt;</pre>
</div> 
<div class="highlight highlight-source-js">
 <pre><span class="pl-k">var</span> editor <span class="pl-k">=</span> <span class="pl-smi">swell</span>.<span class="pl-smi">Editor</span>.<span class="pl-c1">get</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>editor<span class="pl-pds">&quot;</span></span>);</pre>
</div> 
<p>An editor manages swell's text objects. A text can be just local...</p> 
<div class="highlight highlight-source-js">
 <pre><span class="pl-k">var</span> text <span class="pl-k">=</span> <span class="pl-smi">swell</span>.<span class="pl-smi">Text</span>.<span class="pl-en">create</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>Some initial text<span class="pl-pds">&quot;</span></span>);</pre>
</div> 
<p>... or can be shared in a collaborative object if it is assigned to one:</p> 
<div class="highlight highlight-source-js">
 <pre><span class="pl-k">var</span> text <span class="pl-k">=</span> <span class="pl-smi">swell</span>.<span class="pl-smi">Text</span>.<span class="pl-en">create</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>Some initial text<span class="pl-pds">&quot;</span></span>);

<span class="pl-smi">service</span>.<span class="pl-c1">open</span>({ id <span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">&quot;</span>shared-text-object<span class="pl-pds">&quot;</span></span> })
    .<span class="pl-en">then</span>(<span class="pl-smi">object</span> <span class="pl-k">=&gt;</span> {
		
		<span class="pl-k">if</span> (<span class="pl-k">!</span><span class="pl-smi">object</span>.<span class="pl-en">node</span>(<span class="pl-s"><span class="pl-pds">'</span>text<span class="pl-pds">'</span></span>)) {
			<span class="pl-smi">object</span>.<span class="pl-c1">set</span>(<span class="pl-s"><span class="pl-pds">'</span>text<span class="pl-pds">'</span></span>, text);
		}

		text <span class="pl-k">=</span> <span class="pl-smi">object</span>.<span class="pl-c1">get</span>(<span class="pl-s"><span class="pl-pds">'</span>text<span class="pl-pds">'</span></span>); <span class="pl-c"><span class="pl-c">//</span> remind to get this reference!</span>
	});</pre>
</div> 
<p>Common editor operations are:</p> 
<p><strong>editor.set(text)</strong></p> 
<p>Attach the text to the editor, the content is rendered</p> 
<p><strong>editor.edit(boolean)</strong></p> 
<p>Enable user editing</p> 
<p><strong>editor.isEditing()</strong></p> 
<p>Checks whether the editor is in user editing mode</p> 
<p><strong>editor.hasDocument()</strong></p> 
<p>Checks whether the editor has an attached text object</p> 
<p><strong>editor.clean()</strong></p> 
<p>Deattach the text from the editor an clean editor content</p> 
<h2> <a id="text-selections" class="anchor" href="#text-selections" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Text selections</h2> 
<p>The editor component allow apps to assign logic when editor's caret position changes or the user selects text.</p> 
<div class="highlight highlight-source-js">
 <pre><span class="pl-smi">editor</span>.<span class="pl-en">setSelectionHandler</span>((<span class="pl-smi">range</span>, <span class="pl-smi">editor</span>, <span class="pl-smi">selection</span>) <span class="pl-k">=&gt;</span> {
    


      });</pre>
</div> 
<p>The selection handler receives following arguments:</p> 
<p><em>editor</em>, a reference to the editor's object.</p> 
<p><em>range</em>, see <em>selection.range</em>.</p> 
<p><em>selection</em>, the object having information of the current selection. It can be also obtained programatically:</p> 
<div class="highlight highlight-source-js">
 <pre><span class="pl-k">var</span> selection <span class="pl-k">=</span> <span class="pl-smi">editor</span>.<span class="pl-c1">getSelection</span>();</pre>
</div> 
<p>A selection object has following properties and methods:</p> 
<p><em>selection.anchorNode</em>, DOM node in which the selection begins.</p> 
<p><em>selection.anchorOffset</em>, number representing the offset of the selection's anchor within the anchorNode. If anchorNode is a text node, this is the number of characters within anchorNode preceding the anchor. Zero otherwise.</p> 
<p><em>selection.focusNode</em>, DOM node in which the selection ends.</p> 
<p><em>selection.focusOffset</em>, number representing the offset of the selection's anchor within the focusNode. If focusNode is a text node, this is the number of characters within focusNode preceding the focus. Zero otherwise.</p> 
<p><em>selection.range</em>, start and end indexes of the selection refering to the document content chars, not the DOM rendering. For example:</p> 
<div class="highlight highlight-source-js">
 <pre> { 
	 start<span class="pl-k">:</span> <span class="pl-c1">11</span>,
	 end<span class="pl-k">:</span> <span class="pl-c1">25</span>
 }</pre>
</div> 
<p><em>selection.isCollpased</em>, boolean value, true iff range has same start and end positions.</p> 
<p><em>selection.getFocusBound()</em>, gets the y-bounds of the cursor position.</p> 
<p><em>selection.getSelectionPosition()</em>, coordinates of the current selection start relative to a provided element, for example:</p> 
<div class="highlight highlight-source-js">
 <pre>{
	left<span class="pl-k">:</span> <span class="pl-c1">798</span>,
	top<span class="pl-k">:</span> <span class="pl-c1">274</span>,
	offsetParent<span class="pl-k">:</span> <span class="pl-k">&lt;</span><span class="pl-c1">DOM</span> element<span class="pl-k">&gt;</span>
}</pre>
</div> 
<p><em>selection.getAnchorPosition()</em>, coordinates of the current selection end relative to a provided element.</p> 
<h2> <a id="annotations" class="anchor" href="#annotations" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Annotations</h2> 
<p>An annotation is a pair <em>{key, value}</em> associated with a segment of text or <em>range</em> of the document.</p> 
<pre><code>	It was one of those March days when...
	|                   |   |					  
	0                  20   24 	  
</code></pre> 
<p>In this example, we could set an annotation to the word &quot;March&quot; with the following data:</p> 
<ul> 
 <li><em>range: (20,24)</em></li> 
 <li><em>name/key: month</em></li> 
 <li><em>value: 4</em></li> 
</ul> 
<p>The value and the key fields are strings and the range is an ordered pair of positions inside the text.</p> 
<p>Annotations can also modify how text is rendered in order to provide visual effects:</p> 
<h3> <a id="out-of-the-box-annotations" class="anchor" href="#out-of-the-box-annotations" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Out of the box annotations</h3> 
<p>The Swell editor provides a predefined set of annotations that helps to control appearence and styling of the text, following the CSS rules:</p> 
<p><strong>Paragraph style annotations</strong></p> 
<table> 
 <thead> 
  <tr> 
   <th>Name</th> 
   <th>Values</th> 
  </tr> 
 </thead> 
 <tbody> 
  <tr> 
   <td>header</td> 
   <td><em>h1...h5</em></td> 
  </tr> 
  <tr> 
   <td>textAlign</td> 
   <td><em>left, center, right, justify</em></td> 
  </tr> 
  <tr> 
   <td>list</td> 
   <td><em>decimal, unordered</em></td> 
  </tr> 
  <tr> 
   <td>indent</td> 
   <td><em>outdent, indent</em></td> 
  </tr> 
 </tbody> 
</table> 
<p><strong>Text style annotations</strong></p> 
<table> 
 <thead> 
  <tr> 
   <th>Name</th> 
   <th>Values</th> 
  </tr> 
 </thead> 
 <tbody> 
  <tr> 
   <td>backgroundColor</td> 
   <td><em>a CSS color hex #code</em></td> 
  </tr> 
  <tr> 
   <td>color</td> 
   <td><em>a CSS color hex #code</em></td> 
  </tr> 
  <tr> 
   <td>fontFamily</td> 
   <td><em>a CSS font value</em></td> 
  </tr> 
  <tr> 
   <td>fontSize</td> 
   <td><em>a CSS font size</em></td> 
  </tr> 
  <tr> 
   <td>fontStyle</td> 
   <td><em>a CSS font style</em></td> 
  </tr> 
  <tr> 
   <td>fontWeight</td> 
   <td><em>a CSS font weight</em></td> 
  </tr> 
  <tr> 
   <td>textDecoration</td> 
   <td><em>a CSS text decoration value</em></td> 
  </tr> 
  <tr> 
   <td>verticalAlign</td> 
   <td><em>a CSS vertical align value</em></td> 
  </tr> 
 </tbody> 
</table> 
<p>The values of these annotations will be added as inline CSS styles of the annotated text.</p> 
<h3> <a id="custom-annotations" class="anchor" href="#custom-annotations" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Custom annotations</h3> 
<p>In order to use annotations that are rendered in a custom way we must define then in the editor:</p> 
<div class="highlight highlight-source-js">
 <pre><span class="pl-smi">swell</span>.<span class="pl-smi">Editor</span>.<span class="pl-smi">AnnotationRegistry</span>.<span class="pl-en">define</span>(
	<span class="pl-s"><span class="pl-pds">'</span>comment<span class="pl-pds">'</span></span>, 
	<span class="pl-s"><span class="pl-pds">'</span>commentclass<span class="pl-pds">'</span></span>, 
	{ 
		backgroundColor<span class="pl-k">:</span> grey 
	});</pre>
</div> 
<p>In this example, when a <em>comment</em> annotation is rendered the editor will render the annotated text with a HTML like this:</p> 
<div class="highlight highlight-text-html-basic">
 <pre>	&lt;<span class="pl-ent">span</span> <span class="pl-e">class</span>=<span class="pl-s"><span class="pl-pds">&quot;</span>comment<span class="pl-pds">&quot;</span></span> <span class="pl-e">style</span>=<span class="pl-s"><span class="pl-pds">&quot;</span>background-color: grey<span class="pl-pds">&quot;</span></span>&gt;bla bla bla&lt;/<span class="pl-ent">span</span>&gt;</pre>
</div> 
<p><strong>Important</strong>: define custom annotations always BEFORE to get a new editor's instance with any of the methods <em>swell.Editor.createXXX()</em></p> 
<h3> <a id="working-with-annotations" class="anchor" href="#working-with-annotations" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Working with annotations</h3> 
<p><strong>editor.setAnnotation(key, value, [range])</strong></p> 
<p>Sets a new <em>name</em> annotation in the provided range with a given <em>value</em>. Setting a <em>null</em> value removes the annotation only in given range, spliting the rest of the annotation.</p> 
<p>If no range is provided, current selection is assumed.</p> 
<p><strong>editor.clearAnnotation(keys, [range])</strong></p> 
<p>Remove all annotations within array <em>keys</em> that are partially o totally contained in the range.</p> 
<p>If no range is provided, current selection is assumed.</p> 
<p><strong>editor.getAnnotations(keys, [range])</strong></p> 
<p>Get all annotation values for the given keys.</p> 
<p>If <em>range</em> is not provided, current selection range is used.</p> 
<p><strong>editor.getAnnotationsWithValue(keys, value, [range])</strong></p> 
<p>Similar to previous function but filters out annotations with the given value.</p> 
<p><em>Annotation values</em></p> 
<p>Annotations obtained from <em>getAnnotationsXXX()</em> methods returns an object with an array for each annotation found, for example:</p> 
<div class="highlight highlight-source-js">
 <pre>{
	link<span class="pl-k">:</span> [ <span class="pl-k">...</span> ],
	mark<span class="pl-k">:</span> [ <span class="pl-k">...</span> ],
	style<span class="pl-k">/</span>fontSize<span class="pl-k">:</span> [ {

		key<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>style/fontSize<span class="pl-pds">'</span></span>,
		value<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>20px<span class="pl-pds">'</span></span>,
		line<span class="pl-k">:</span> <span class="pl-k">&lt;</span>dom element<span class="pl-k">&gt;</span>,
		node<span class="pl-k">:</span> <span class="pl-k">&lt;</span>dom node<span class="pl-k">&gt;</span>,
		range<span class="pl-k">:</span> {
			start<span class="pl-k">:</span> <span class="pl-c1">10</span>,
			end<span class="pl-k">:</span> <span class="pl-c1">21</span>
		},
		text<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>hello world<span class="pl-pds">'</span></span>,
		searchMatch<span class="pl-k">:</span> <span class="pl-c1">0</span>


	} ]

}</pre>
</div> 
<p><em>searchMatch</em> value can take these values:</p> 
<ul> 
 <li> <em>swell.Annotation.MATCH_IN</em> the search range is equals or inside the annotations's range.</li> 
 <li> <em>swell.Annotation.MATCH_OUT</em> the search range is partially out of the annotation's range or spans beyond it.</li> 
</ul> 
<p><em>Ranges</em></p> 
<p>Usually you won't need to provide a hand written range (because you will get one from another part of the API) but if that is the case, create a new object with following properties:</p> 
<div class="highlight highlight-source-js">
 <pre><span class="pl-k">var</span> range <span class="pl-k">=</span> {
	start<span class="pl-k">:</span> <span class="pl-c1">11</span>,
	end<span class="pl-k">:</span> <span class="pl-c1">23</span>
};</pre>
</div> 
<p>In situations when you need to indicate a range spaning the whole document use the constant:</p> 
<div class="highlight highlight-source-js">
 <pre><span class="pl-k">var</span> fullDocumentRange <span class="pl-k">=</span> <span class="pl-smi">swell</span>.<span class="pl-smi">Editor</span>.<span class="pl-c1">RANGE_ALL</span>;</pre>
</div> 
<h3> <a id="overlapping-text-annotations" class="anchor" href="#overlapping-text-annotations" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Overlapping Text annotations</h3> 
<p>Overlapping of annotations with same name can be problematic for some specific logics. Let's imagine the following example of a annotated text representing a comment (with value A):</p> 
<pre><code>              	  {comment,A}  
                  |         |
	It was one of those March days when...
	              					  
	                	  
</code></pre> 
<p>If we want to comment another part of the text that overlaps first comment's text, by default, the editor will split an override the former annotation with the new one (B):</p> 
<pre><code>              	  {comment,A}  
                  |    |
    It was one of those March days when...
	                    |        |              					  
	                    {comment,B}
</code></pre> 
<p>In this case, we have lost the reference of comment A in the word &quot;March&quot;.</p> 
<p>To avoid this situation you can use specific methods for text annotations:</p> 
<p><strong>editor.setAnnotationOverlap(name, value, [range])</strong></p> 
<p>For the previous example, this method will generate following annotations:</p> 
<pre><code>                {comment,A}  {comment,B}  
                  |    |      |  |
    It was one of those March days when...
	                    |    |  
	                  {comment, A,B}
</code></pre> 
<p>Now, the word &quot;March&quot; will be annotated with annotation &quot;comment&quot; with combined value &quot;A,B&quot;.</p> 
<p>In order to revert this annotation properly use the method:</p> 
<p><strong>editor.clearAnnotationOverlap(name, value, [range])</strong></p> 
<h3> <a id="events" class="anchor" href="#events" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Events</h3> 
<p>Annotation events are triggered both when the annotation is created or deleted in the document and when it is rendered or removed from the DOM view.</p> 
<p>Annotation's event handler must be set right after the an annotation is defined:</p> 
<div class="highlight highlight-source-js">
 <pre><span class="pl-smi">swell</span>.<span class="pl-smi">Editor</span>.<span class="pl-smi">AnnotationRegistry</span>
	.<span class="pl-en">define</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>mark<span class="pl-pds">&quot;</span></span>,<span class="pl-s"><span class="pl-pds">&quot;</span>mark<span class="pl-pds">&quot;</span></span>);

 <span class="pl-smi">swell</span>.<span class="pl-smi">Editor</span>.<span class="pl-smi">AnnotationRegistry</span>
 	.<span class="pl-en">setHandler</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>mark<span class="pl-pds">&quot;</span></span>, (<span class="pl-c1">event</span>) <span class="pl-k">=&gt;</span> {

      <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>annotation event [<span class="pl-pds">&quot;</span></span><span class="pl-k">+</span><span class="pl-c1">event</span>.<span class="pl-c1">type</span><span class="pl-k">+</span><span class="pl-s"><span class="pl-pds">&quot;</span>] <span class="pl-pds">&quot;</span></span><span class="pl-k">+</span><span class="pl-c1">event</span>.<span class="pl-smi">annotation</span>.<span class="pl-smi">key</span><span class="pl-k">+</span><span class="pl-s"><span class="pl-pds">&quot;</span>=<span class="pl-pds">&quot;</span></span><span class="pl-k">+</span><span class="pl-c1">event</span>.<span class="pl-smi">annotation</span>.<span class="pl-c1">value</span><span class="pl-k">+</span><span class="pl-s"><span class="pl-pds">&quot;</span>, <span class="pl-pds">&quot;</span></span><span class="pl-k">+</span><span class="pl-c1">event</span>.<span class="pl-smi">annotation</span>.<span class="pl-smi">range</span>.<span class="pl-c1">start</span><span class="pl-k">+</span><span class="pl-s"><span class="pl-pds">&quot;</span>:<span class="pl-pds">&quot;</span></span><span class="pl-k">+</span><span class="pl-c1">event</span>.<span class="pl-smi">annotation</span>.<span class="pl-smi">range</span>.<span class="pl-smi">end</span>);

    });	</pre>
</div> 
<p>An event object is passed to the handler anytime the given annotation throws an event. This object has following properties:</p> 
<div class="highlight highlight-source-js">
 <pre><span class="pl-c1">event</span> <span class="pl-k">=</span> {

	type<span class="pl-k">:</span> <span class="pl-k">&lt;</span>int<span class="pl-k">&gt;</span>,
	annotation<span class="pl-k">:</span> <span class="pl-k">&lt;</span>annotation value<span class="pl-k">&gt;</span>
	domEvent<span class="pl-k">:</span> <span class="pl-k">&lt;</span>dom <span class="pl-c1">event</span><span class="pl-k">&gt;</span>

}</pre>
</div> 
<p>There are two type of events, for DOM and for document changes. DOM events are thrown anytime the editor needs to repaint annotations:</p> 
<ul> 
 <li><em>swell.Annotation.EVENT_DOM_MUTATED</em></li> 
 <li><em>swell.Annotation.EVENT_DOM_CREATED</em></li> 
 <li><em>swell.Annotation.EVENT_DOM_REMOVED</em></li> 
</ul> 
<p>Document events are only thrown when annotations are created or removed in the document:</p> 
<ul> 
 <li><em>swell.Annotation.EVENT_CREATED</em></li> 
 <li><em>swell.Annotation.EVENT_REMOVED</em></li> 
</ul> 
<h3> <a id="custom-carets" class="anchor" href="#custom-carets" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Custom carets</h3> 
<p>Rendering of carets can be customized. Custom carets must be objects providing following properties and methods:</p> 
<div class="highlight highlight-source-js">
 <pre><span class="pl-k">var</span> caret <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">Caret</span>(); <span class="pl-c"><span class="pl-c">//</span> our custom caret type</span>
<span class="pl-smi">caret</span>.<span class="pl-smi">element</span>; <span class="pl-c"><span class="pl-c">//</span> property with the DOM element of the rendered caret.</span>
<span class="pl-smi">caret</span>.<span class="pl-en">update</span>(caretInfo); <span class="pl-c"><span class="pl-c">//</span> a method to pass info to the object.</span></pre>
</div> 
<p>Configure the editor component with a factory of carets using the configuration property &quot;caretFactory&quot;:</p> 
<div class="highlight highlight-source-js">
 <pre><span class="pl-smi">swell</span>.<span class="pl-smi">Editor</span>.<span class="pl-en">configure</span>({
	<span class="pl-en">caretFactory</span><span class="pl-k">:</span> <span class="pl-k">function</span>() { <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-en">Caret</span>(); }
});</pre>
</div> 
<h2> <a id="development" class="anchor" href="#development" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Development</h2> 
<h3> <a id="logging-editor-events" class="anchor" href="#logging-editor-events" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Logging editor events</h3> 
<p>Log to browser's console:</p> 
<div class="highlight highlight-source-js">
 <pre><span class="pl-smi">swell</span>.<span class="pl-smi">Editor</span>.<span class="pl-en">configure</span>({
	consoleLog<span class="pl-k">:</span> <span class="pl-c1">true</span>
});</pre>
</div> 
<p>Log to an HTML panel:</p> 
<div class="highlight highlight-source-js">
 <pre><span class="pl-smi">swell</span>.<span class="pl-smi">Editor</span>.<span class="pl-en">configure</span>({
	logPanel<span class="pl-k">:</span> <span class="pl-c1">document</span>.<span class="pl-c1">getElementById</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>log<span class="pl-pds">&quot;</span></span>),
});</pre>
</div> 
<p>Logging is available when GWT log level is &quot;DEBUG&quot; or &quot;ERROR&quot;. Check out current log level in &quot;build.gradle&quot; and GWT module files &quot;ServiceFrontendDev.gwt.xml&quot;</p> 
<h3> <a id="wave-harness-editor" class="anchor" href="#wave-harness-editor" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Wave Harness Editor</h3> 
<p>The Wave project (where Swell is on top) has a GWT module to play with an standalone editor instance.</p> 
<div class="highlight highlight-source-shell">
 <pre>./gradlew editorHarness</pre>
</div> 
<pre><code>http://localhost:9876/org.waveprotocol.wave.client.editor.harness.EditorTest/EditorTest.html
</code></pre> 
<ul> 
 <li>Activate GWT SuperDev mode if necessary with the provided links</li> 
</ul> 
<p>Configure extension of the editor in <code>DefaultTestHarness.java</code></p> 
<p>Harness editor runs solely in client side, hence no running server is required.</p> 
<h3> <a id="swell-editor-sandbox" class="anchor" href="#swell-editor-sandbox" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Swell Editor Sandbox</h3> 
<p>Editor sandbox is a small GWT app to play editor features. Run with following commands:</p> 
<div class="highlight highlight-source-shell">
 <pre>./gradlew sandbox</pre>
</div> 
<pre><code>http://127.0.1.1:9876/org.swellrt.sandbox.editor.Sandbox/editor.html
</code></pre> 
<p>Sandbox editor runs solely in client side, no running server is required.</p> 
<h3> <a id="developers-recipes" class="anchor" href="#developers-recipes" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Developer's recipes</h3> 
<p><em>Running GWT compiler and DevMode from cmd line</em></p> 
<p>Look for the <code>gwt-dev.jar</code> in local maven repo <code>find ~/.gradle/caches/ | grep gwt | grep .jar</code></p> 
<p><code>java -cp gwt-dev.jar com.google.gwt.dev.Compiler</code></p>
</body>
</html>
